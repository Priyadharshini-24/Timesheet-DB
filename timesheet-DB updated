CREATE TABLE USER_LOGIN
(USER_ID NUMBER GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
FIRST_NAME VARCHAR2(50) NOT NULL,
LAST_NAME VARCHAR2(50) NOT NULL,
USER_NAME VARCHAR2(100) NOT NULL,
PASSWORD VARCHAR2(50) NOT NULL,
CREATED_DATE DATE DEFAULT SYSDATE NOT NULL,
UNIQUE(USER_NAME),
CONSTRAINT PK_USER_ID PRIMARY KEY (USER_ID));
DESC USER_LOGIN;

--DROP TABLE USER_DETAIL;

INSERT INTO USER_LOGIN(FIRST_NAME,LAST_NAME,USER_NAME,PASSWORD)VALUES('DHARSHAN','RAVI','dharshanravi@gmail.com','Dharshan03@');

DELETE USER_DETAIL WHERE user_id=2;

SELECT * FROM USER_LOGIN order by user_id;


CREATE TABLE TASK(
TASK_ID NUMBER GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
USER_ID NUMBER NOT NULL,
CONSTRAINT FK_ID FOREIGN KEY(USER_ID) REFERENCES USER_LOGIN(USER_ID),
TASK_NAME VARCHAR2(100)NOT NULL,
CREATED_BY VARCHAR2(100)NOT NULL,
ASSSIGNED_TO VARCHAR2(100)NOT NULL,
CREATED_DATE DATE DEFAULT SYSDATE NOT NULL,
ASSIGNED_DATE DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT Pk_task_id PRIMARY KEY (TASK_ID));
DESC TASK;
DROP TABLE TASK;

CREATE TABLE TIMESHEET(
TIMESHEET_ID NUMBER GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
USER_ID NUMBER NOT NULL,
CONSTRAINT FK_uID FOREIGN KEY(USER_ID) REFERENCES USER_LOGIN(USER_ID),
TASK_ID NUMBER NOT NULL,
CONSTRAINT FK_task1_ID FOREIGN KEY(TASK_ID) REFERENCES TASK(TASK_ID),
SPEND_TIME_HRS NUMBER NOT NULL,
COMMENTS VARCHAR2(200) NOT NULL,
ENTER_BY VARCHAR2(100) NOT NULL,
STATUS VARCHAR2(50) DEFAULT ('NOT APPROVED') NOT NULL,
APPROVED_BY VARCHAR2(100),
TIMESHEET_ENTERED_DATE DATE DEFAULT SYSDATE NOT NULL, 
CURRENT_DATE DATE DEFAULT SYSDATE NOT NULL,
STATUS_UPDATE_DATE  DATE DEFAULT SYSDATE NOT NULL,
CONSTRAINT Pk_timesheet_id PRIMARY KEY (TIMESHEET_ID)
);
DROP TABLE TIMESHEET;
DESC TIMESHEET;

CREATE TABLE Admin(
ROLE_ID NUMBER GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
USER_ID NUMBER NOT NULL,
CONSTRAINT FK_USER FOREIGN KEY(USER_ID) REFERENCES USER_LOGIN(USER_ID),
USER_NAME VARCHAR2(100) NOT NULL ,
PASSWORD VARCHAR2(50) NOT NULL,
ROLE VARCHAR2(100) DEFAULT 'ADMIN',
CONSTRAINT PK_ROLE_ID PRIMARY KEY (ROLE_ID)
);
insert into roles(USER_ID)VALUES(1);
DESC ROLES;
DROP TABLE ROLE;

CREATE TABLE REPORT(
REPORT_ID NUMBER GENERATED ALWAYS AS IDENTITY(START WITH 1 INCREMENT BY 1),
REPORT_DATE DATE NOT NULL,
USER_ID NUMBER NOT NULL,
CONSTRAINT frk_uid FOREIGN KEY(USER_ID) REFERENCES USER_LOGIN(USER_ID),
TASK_ID NUMBER NOT NULL,
CONSTRAINT frk_taskid FOREIGN KEY(TASK_ID) REFERENCES TASK(TASK_ID),
TIMESHEET_ID NUMBER NOT NULL,
CONSTRAINT frk_timeid FOREIGN KEY(TIMESHEET_ID) REFERENCES TIMESHEET(TIMESHEET_ID),
ROLE_ID NUMBER NOT NULL,
CONSTRAINT frk_adminid FOREIGN KEY(ROLE_ID) REFERENCES Admin(ROLE_ID),
constraint prk_report primary key(report_id)
);
DROP TABLE REPORT;
DESC USER_LOGIN;
DESC TASK;
DESC TIMESHEET;
DESC Admin;
DESC REPORT;

COMMIT;
